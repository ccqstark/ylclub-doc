# 人员更新换代业务逻辑

## 学生或老师每年更新换代

需要在记录学生和老师的表增加2个字段字段 `deleted` 和 `checked`

`deleted`表示是否被删除，`checked`表示是否被发现存在（即导入Excel中有的）

导入接口处理流程：

1. 分批读取Excel，每条去数据库中按学号查找，如果存在，就看是否需要更新信息，如果不存在，插入且deleted为0，checked为1
2. 把表中所有checked为0的记录的deleted置为1，表示删除了（一般为毕业生），且同时把checked置为1，避免明年再次检查
3. 把表中checked为1且deleted为0的记录，checked置为0，这些是今年存在的人员，供明年更新换代时继续检查更新。
4. 这样每年重复这个过程，保证每年只对当年的数据进行筛查，不对过往已经毕业或删除的人员重复检查。

